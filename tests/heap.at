AT_BANNER([heap library])

m4_define([TEST_HEAP],
  [AT_SETUP([heap library -- m4_bpatsubst([$1], [-], [ ])])
   AT_CHECK([ovstest test-heap $1])
   AT_CLEANUP])

TEST_HEAP([insert-delete-same-order])
TEST_HEAP([insert-delete-reverse-order])
TEST_HEAP([insert-delete-every-order])
TEST_HEAP([insert-delete-same-order-with-dups])
TEST_HEAP([raw-insert])
TEST_HEAP([raw-delete])

# Fail
AT_SETUP([custom -- 1])
AT_CHECK([echo 0], [0], [0])
AT_CLEANUP

# ???
AT_SETUP([custom -- 2])
AT_CHECK([echo 3], [0], [3])
AT_CLEANUP

# ???
AT_SETUP([custom -- 3])
AT_CHECK([echo 3], [3], [0])
AT_CLEANUP

# ???
AT_SETUP([custom -- 4])
AT_CHECK([echo 3], [], [3])
AT_CLEANUP

# Fail
AT_SETUP([custom -- 5])
AT_CHECK([echo 0], [0], [[0]], [[stdout]])
AT_CLEANUP

# True
AT_SETUP([custom -- 6])
AT_CHECK([true])
AT_CLEANUP

# ???
AT_SETUP([custom -- 7])
AT_CHECK([echo 3], [3], [])
AT_CLEANUP
